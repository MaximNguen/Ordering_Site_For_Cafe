{% extends "base.html" %}
{% load static %}

{% block content %}
<main class="main-section">
    <section class="menu-section">
        <div class="menu-section-word">
            <p><b>Заказ #{{ order.id }}</b></p>
        </div>
    </section>

    <section class="order-details">
        <div class="order-info">
            <p><strong>Статус:</strong> {{ order.get_status_display }}</p>
            <p><strong>Дата создания:</strong> {{ order.created_at }}</p>
            <p><strong>Адрес доставки:</strong> {{ order.delivery_address }}</p>
            <p><strong>Телефон:</strong> {{ order.phone_number }}</p>
            {% if order.comments %}<p><strong>Комментарии:</strong> {{ order.comments }}</p>{% endif %}
        </div>

        <div class="order-items">
            <h3>Состав заказа</h3>
            <table>
                <thead>
                    <tr>
                        <th>Товар</th>
                        <th>Количество</th>
                        <th>Цена</th>
                        <th>Сумма</th>
                    </tr>
                </thead>
                <tbody>
                    {% for item in order.items.all %}
                    <tr>
                        <td>{{ item.product.name }}</td>
                        <td>{{ item.quantity }}</td>
                        <td>{{ item.price }}₽</td>
                        <td>{{ item.get_total }}₽</td>
                    </tr>
                    {% endfor %}
                </tbody>
                <tfoot>
                    <tr>
                        <td colspan="3"><strong>Итого:</strong></td>
                        <td><strong>{{ order.total_price }}₽</strong></td>
                    </tr>
                </tfoot>
            </table>
        </div>
    </section>
</main>
{% endblock %}