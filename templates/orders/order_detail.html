{% extends "base.html" %}
{% load static %}

{% block content %}
<main class="main-section">
    <section class="menu-section">
        <div class="menu-section-word">
            <p><b>Заказ #{{ order.id }}</b></p>
        </div>
    </section>

    <section class="order-details">
        <div class="order-info">
            <p><strong>Статус:</strong> {{ order.get_status_display }}</p>
            <p><strong>Дата создания:</strong> {{ order.created_at_samara }}</p>
            <p><strong>Способ получения:</strong> {{ order.get_delivery_method_display }}</p>
            <p><strong>Способ оплаты:</strong> {{ order.get_payment_method_display }}</p>
                {% if order.pickup_location %}
                    <p><strong>Адрес заведения (Для самовызова):</strong> {{ order.pickup_location }}</p>
                {% else %}
                    <p><strong>Адрес доставки:</strong> {{ order.delivery_address }}</p>
                {% endif %}
            <p><strong>Телефон:</strong> {{ order.phone_number }}</p>
            {% if order.comments %}<p><strong>Комментарии:</strong> {{ order.comments }}</p>{% endif %}
        {% if order.get_delivery_method_display == 'Доставка' %}
            <p><strong>Стоимость доставки: </strong>150₽</p>
        {% endif %}
        </div>

    <h3>Состав заказа</h3>
        <div class="cart-table">
            <table>
                <thead>
                    <tr>
                        <th>Товар</th>
                        <th>Количество</th>
                        <th>Цена</th>
                        <th>Сумма</th>
                    </tr>
                </thead>
                <tbody>
                    {% for item in order.items.all %}
                    <tr>
                        <td>{{ item.product.name }}</td>
                        <td>{{ item.quantity }}</td>
                        <td>{{ item.price }}₽</td>
                        <td>{{ item.total_price }}₽</td>
                    </tr>
                    {% endfor %}
                </tbody>
                <tfoot>
                    <tr>
                        <td colspan="3"><strong>Итого:</strong></td>
                        <td><strong>{{ order.total_price }}₽</strong></td>
                    </tr>
                </tfoot>
            </table>
        </div>
    </section>
</main>
{% endblock %}